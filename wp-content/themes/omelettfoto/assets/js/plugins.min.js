function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]"),b&&-1!==b.content.indexOf("user-scalable=no"))return!0}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(a,b,c,d){"use strict";var e=c(a),f=c(b),g=c("html"),h=c.fancybox=function(){h.open.apply(this,arguments)},i=h.isTouch=b.createTouch!==d||a.ontouchstart!==d,j=function(a){return a&&a.hasOwnProperty&&a instanceof c},k=function(a){return a&&"string"===c.type(a)},l=function(a){return k(a)&&a.indexOf("%")>0},m=function(a,b){var c=parseFloat(a,10)||0;return b&&l(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},n=function(a,b){return m(a,b)+"px"},o=Date.now||function(){return+new Date},p=function(a){var b=k(a)?c(a):a;if(b&&b.length){b.removeClass("fancybox-wrap").stop(!0).trigger("onReset").hide().unbind();try{b.find("iframe").unbind().attr("src",i?"":"//about:blank"),setTimeout(function(){if(b.empty().remove(),h.lock&&!h.coming&&!h.current){var a,d;c(".fancybox-margin").removeClass("fancybox-margin"),a=e.scrollTop(),d=e.scrollLeft(),g.removeClass("fancybox-lock"),h.lock.remove(),h.lock=null,e.scrollTop(a).scrollLeft(d)}},150)}catch(d){}}};c.extend(h,{version:"3.0.0",defaults:{theme:"default",padding:15,margin:[30,55,30,55],loop:!0,arrows:!0,closeBtn:!0,expander:!i,caption:{type:"outside"},overlay:{closeClick:!0,speedIn:0,speedOut:250,showEarly:!0,css:{}},helpers:{},width:800,height:450,minWidth:100,minHeight:100,maxWidth:99999,maxHeight:99999,aspectRatio:!1,fitToView:!0,autoHeight:!0,autoWidth:!0,autoResize:!0,autoCenter:!i,topRatio:.5,leftRatio:.5,openEffect:"elastic",openSpeed:350,openEasing:"easeOutQuad",closeEffect:"elastic",closeSpeed:350,closeEasing:"easeOutQuad",nextEffect:"elastic",nextSpeed:350,nextEasing:"easeOutQuad",prevEffect:"elastic",prevSpeed:350,prevEasing:"easeOutQuad",autoPlay:!1,playSpeed:3e3,onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeClose:c.noop,afterClose:c.noop,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-inner"></div></div>',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true"></iframe>',error:'<p class="fancybox-error">{{ERROR}}</p>',closeBtn:'<a title="{{CLOSE}}" class="fancybox-close" href="javascript:;"></a>',next:'<a title="{{NEXT}}" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="{{PREV}}" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},locale:"en",locales:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",EXPAND:"Display actual size",SHRINK:"Fit to the viewport",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow"},de:{CLOSE:"Schliessen",NEXT:"Vorwärts",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",EXPAND:"",SHRINK:"",PLAY_START:"",PLAY_STOP:""}},index:0,content:null,href:null,wrapCSS:"",modal:!1,locked:!0,preload:3,mouseWheel:!0,scrolling:"auto",scrollOutside:!0},current:null,coming:null,group:[],index:0,isActive:!1,isOpen:!1,isOpened:!1,isMaximized:!1,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,helpers:{},open:function(a,b){a&&!1!==h.close(!0)&&(c.isPlainObject(b)||(b={}),h.opts=c.extend(!0,{},h.defaults,b),h.populate(a),h.group.length&&h._start(h.opts.index))},populate:function(a){var b=[];c.isArray(a)||(a=[a]),c.each(a,function(e,f){var g,l,m,n,o,p=c.extend(!0,{},h.opts);if(c.isPlainObject(f))g=f;else if(k(f))g={href:f};else{if(!(j(f)||"object"===c.type(f)&&f.nodeType))return;l=c(f),g=c(l).get(0),g.href||(g={href:f}),g=c.extend({href:l.data("fancybox-href")||l.attr("href")||g.href,title:l.data("fancybox-title")||l.attr("title")||g.title,type:l.data("fancybox-type"),element:l},l.data("fancybox-options"))}g.type||!g.content&&!g.href||(g.type=g.content?"html":h.guessType(l,g.href)),m=g.type||h.opts.type,("image"===m||"swf"===m)&&(p.autoWidth=p.autoHeight=!1,p.scrolling="visible"),"image"===m&&(p.aspectRatio=!0),"iframe"===m&&(p.autoWidth=!1,p.scrolling=i?"scroll":"visible"),a.length<2&&(p.margin=30),g=c.extend(!0,{},p,g),n=g.margin,o=g.padding,"number"===c.type(n)&&(g.margin=[n,n,n,n]),"number"===c.type(o)&&(g.padding=[o,o,o,o]),g.modal&&c.extend(!0,g,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,overlay:{closeClick:!1}}),g.autoSize!==d&&(g.autoWidth=g.autoHeight=!!g.autoSize),"auto"===g.width&&(g.autoWidth=!0),"auto"===g.height&&(g.autoHeight=!0),b.push(g)}),h.group=h.group.concat(b)},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&p(a.wrap),h.ajaxLoad=h.imgPreload=h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){a&&"object"===c.type(a)&&a.preventDefault(),h.cancel(),h.isActive&&!h.coming&&!1!==h.trigger("beforeClose")&&(h.unbind(),h.isClosing=!0,h.lock&&h.lock.css("overflow","hidden"),h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.transitions.close()):h._afterZoomOut())},prev:function(a){var b=h.current;b&&h.jumpto(b.index-1,k(a)?a:b.direction.prev)},next:function(a){var b=h.current;b&&h.jumpto(b.index+1,k(a)?a:b.direction.next)},jumpto:function(a,b){var c=h.current;h.coming&&h.coming.index===a||(h.cancel(),c.index==a?b=null:b||(b=c.direction[a>c.index?"next":"prev"]),h.direction=b,h._start(a))}}),c.extend(h,{guessType:function(a,b){var c=a&&a.prop("class")?a.prop("class").match(/fancybox\.(\w+)/):0,d=!1;return c?c[1]:(k(b)?b.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)?d="image":b.match(/\.(swf)((\?|#).*)?$/i)?d="swf":"#"===b.charAt(0)&&(d="inline"):k(a)&&(d="html"),d)},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1||"afterClose"===a&&h.isActive)return!1;e.helpers&&c.each(e.helpers,function(b,d){var f,g=h.helpers[b];d&&g&&c.isFunction(g[a])&&(f=c.extend(!0,{},g.defaults,d),g.opts=f,g[a](f,e))}),c.event.trigger(a)}},reposition:function(a,b){var c,d=b||h.current,e=d&&d.wrap;h.isOpen&&e&&(c=h._getPosition(d),a===!1||a&&"scroll"===a.type?e.stop(!0).animate(c,200).css("overflow","visible"):e.css(c))},update:function(a){var b,d=a&&a.type,e=(o(),h.current);if(e&&h.isOpen){if("scroll"===d){if(h.wrap.outerHeight(!0)>h.getViewport().h)return;return h.didUpdate&&clearTimeout(h.didUpdate),void(h.didUpdate=setTimeout(function(){h.reposition(a),h.didUpdate=null},50))}h.lock&&h.lock.css("overflow","hidden"),h._setDimension(),h.reposition(a),h.lock&&h.lock.css("overflow","auto"),"float"===e.caption.type&&(b=h.getViewport().w-(h.wrap.outerWidth(!0)-h.inner.width()),e.caption.wrap.css("width",b).css("marginLeft",-1*(.5*b-.5*h.inner.width()))),e.expander&&(e.canShrink?c(".fancybox-expand").show().attr("title",e.locales[e.locale].SHRINK):e.canExpand?c(".fancybox-expand").show().attr("title",e.locales[e.locale].EXPAND):c(".fancybox-expand").hide()),h.trigger("onUpdate")}},toggle:function(a){var b=h.current;b&&h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,h.update(!0))},hideLoading:function(){c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"></div>').click(h.cancel).appendTo("body"),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b;return b=h.lock?{x:h.lock.scrollLeft(),y:h.lock.scrollTop(),w:h.lock[0].clientWidth,h:h.lock[0].clientHeight}:{x:e.scrollLeft(),y:e.scrollTop(),w:i&&a.innerWidth?a.innerWidth:e.width(),h:i&&a.innerHeight?a.innerHeight:e.height()}},unbind:function(){j(h.wrap)&&h.wrap.unbind(".fb"),j(h.inner)&&h.inner.unbind(".fb"),f.unbind(".fb"),e.unbind(".fb")},rebind:function(){var a,b=h.current;h.unbind(),b&&h.isOpen&&(e.bind("orientationchange.fb"+(i?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),h.update),a=b.keys,a&&f.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(a,function(a,g){return g[f]!==d?(e.preventDefault(),b.group.length>1&&h[a](g[f]),!1):c.inArray(f,g)>-1?(e.preventDefault(),"play"===a?h.slideshow.toggle():h[a](),!1):void 0}))}),h.lastScroll=o(),b.mouseWheel&&h.group.length>1&&h.wrap.bind("DOMMouseScroll.fb mousewheel.fb MozMousePixelScroll.fb",function(a){var b=a.originalEvent,c=b.target||0,d=b.wheelDelta||b.detail||0,e=b.wheelDeltaX||0,f=b.wheelDeltaY||0,g=o();if((!c||!c.style||c.style.overflow&&"hidden"===c.style.overflow||!(c.clientWidth&&c.scrollWidth>c.clientWidth||c.clientHeight&&c.scrollHeight>c.clientHeight))&&!(0===d||h.current&&h.current.canShrink)){if(b.stopPropagation(),h.lastScroll&&g-h.lastScroll<80)return void(h.lastScroll=g);h.lastScroll=g,b.axis&&(b.axis===b.HORIZONTAL_AXIS?e=-1*d:b.axis===b.VERTICAL_AXIS&&(f=-1*d)),0===e?f>0?h.prev("down"):h.next("up"):e>0?h.prev("right"):h.next("left")}}),h.touch.init())},rebuild:function(){var a=h.current;a.wrap.find(".fancybox-nav, .fancybox-close, .fancybox-expand").remove(),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(h._translate(a.tpl.prev)).appendTo(h.inner).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(h._translate(a.tpl.next)).appendTo(h.inner).bind("click.fb",h.next)),a.closeBtn&&c(h._translate(a.tpl.closeBtn)).appendTo(h.wrap).bind("click.fb",h.close),a.expander&&"image"===a.type&&(c('<a title="Expand image" class="fancybox-expand" href="javascript:;"></a>').appendTo(h.inner).bind("click.fb",h.toggle),!a.canShrink&&!a.canExpand)},_start:function(a){var b,d;return h.opts.loop&&(0>a&&(a=h.group.length+a%h.group.length),a%=h.group.length),(b=h.group[a])?(b=c.extend(!0,{},h.opts,b),b.group=h.group,b.index=a,h.coming=b,!1===h.trigger("beforeLoad")?void(h.coming=null):(h.isActive=!0,h._build(),f.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(f.unbind(".loading"),a.preventDefault(),h.cancel())}),b.overlay&&b.overlay.showEarly&&h.overlay.open(b.overlay),d=b.type,void("image"===d?h._loadImage():"ajax"===d?h._loadAjax():"iframe"===d?h._loadIframe():"inline"===d?h._loadInline():"html"===d||"swf"===d?h._afterLoad():h._error()))):!1},_build:function(){var a,b,d,i,j=h.coming,k=j.caption.type;j.wrap=a=c('<div class="fancybox-wrap"></div>').appendTo(j.parent||"body").addClass("fancybox-"+j.theme),j.inner=b=c('<div class="fancybox-inner"></div>').appendTo(a),j["outside"===k||"float"===k?"inner":"wrap"].addClass("fancybox-skin fancybox-"+j.theme+"-skin"),j.locked&&j.overlay&&h.defaults.fixed&&(h.lock||(h.lock=c('<div id="fancybox-lock"></div>').appendTo(a.parent())),h.lock.unbind().append(a),j.overlay.closeClick&&h.lock.click(function(a){c(a.target).is(h.lock)&&h.close()}),(f.height()>e.height()||"scroll"===g.css("overflow-y"))&&(c("*:visible").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&"fancybox-lock"!==c(this).attr("id")}).addClass("fancybox-margin"),g.addClass("fancybox-margin")),d=e.scrollTop(),i=e.scrollLeft(),g.addClass("fancybox-lock"),e.scrollTop(d).scrollLeft(i)),h.trigger("onReady")},_error:function(a){h.coming&&(c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,closeBtn:!0,minWidth:0,minHeight:0,padding:[15,15,15,15],scrolling:"visible",hasError:a,content:h._translate(h.coming.tpl.error)}),h._afterLoad())},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,c.extend(h.coming,{width:this.width,height:this.height,content:c(this).addClass("fancybox-image")}),h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,(a.complete!==!0||a.width<1)&&h.showLoading()},_loadAjax:function(){var a,b,d=h.coming,e=d.href;a=e.split(/\s+/,2),e=a.shift(),b=a.shift(),h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},d.ajax,{url:d.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(a,e){"success"===e&&(b&&(a=c("<div>").html(a).find(b)),d.content=a,h._afterLoad())}}))},_loadIframe:function(){var a,b=h.coming;b.content=a=c(b.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",i?"auto":b.iframe.scrolling),b.iframe.preload&&(h.showLoading(),h._setDimension(b),b.wrap.addClass("fancybox-tmp"),a.one("load.fb",function(){b.iframe.preload&&(c(this).data("ready",1),c(this).bind("load.fb",h.update),h._afterLoad())})),a.attr("src",b.href).appendTo(b.inner),b.iframe.preload?1!==a.data("ready")&&h.showLoading():h._afterLoad()},_loadInline:function(){var a=h.coming,b=a.href;a.content=c(k(b)?b.replace(/.*(?=#[^\s]+$)/,""):b),a.content.length?h._afterLoad():h._error()},_preloadImages:function(){var a,b,c=h.group,d=h.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],a&&"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a=h.coming,b=h.current;return f.unbind(".loading"),a&&h.isActive!==!1&&!1!==h.trigger("afterLoad",a,b)?(c.extend(h,{wrap:a.wrap.addClass("fancybox-type-"+a.type+" fancybox-"+(i?"mobile":"desktop")+" fancybox-"+a.theme+"-"+(i?"mobile":"desktop")+" "+a.wrapCSS),inner:a.inner,current:a,previous:b}),h._prepare(),h.trigger("beforeShow",a,b),h.isOpen=!1,h.coming=null,h._setDimension(),h.hideLoading(),a.overlay&&!h.overlay.el&&h.overlay.open(a.overlay),void h.transitions.open()):(h.hideLoading(),a&&a.wrap&&p(a.wrap),b||h._afterZoomOut(a),void(h.coming=null))},_prepare:function(){var a,b=h.current,d=b.content||"",e=b.wrap,f=b.inner,g=b.margin,i=b.padding,l=b.href,m=b.type,o=(b.scrolling,b.caption),p=b.title,q=o.type,r="fancybox-placeholder",s="fancybox-display";"iframe"!==m&&j(d)&&d.length&&(d.data(r)||d.data(s,d.css("display")).data(r,c('<div class="'+r+'"></div>').insertAfter(d).hide()),d=d.show().detach(),b.wrap.bind("onReset",function(){c(this).find(d).length&&d.css("display",d.data(s)).replaceAll(d.data(r)).data(r,!1).data(s,!1)})),"swf"===m&&(d='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+l+'"></param>',a="",c.each(b.swf,function(b,c){d+='<param name="'+b+'" value="'+c+'"></param>',a+=" "+b+'="'+c+'"'}),d+='<embed src="'+l+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"),j(d)&&d.parent().is(b.inner)||(b.inner.append(d),b.content=b.inner.children(":last")),c.each(["Top","Right","Bottom","Left"],function(a,b){g[a]&&e.css("margin"+b,n(g[a])),i[a]&&(("Bottom"!==b||"outside"!==q)&&e.css("padding"+b,n(i[a])),("outside"===q||"float"===q)&&(f.css("border"+b+"Width",n(i[a])),("Top"===b||"Left"===b)&&f.css("margin"+b,n(-1*i[a]))))}),c.isFunction(p)&&(p=p.call(b.element,b)),k(p)&&""!==c.trim(p)&&(b.caption.wrap=c('<div class="fancybox-title fancybox-title-'+q+'-wrap">'+p+"</div>").appendTo(b["over"===q?"inner":"wrap"]),"float"===q&&b.caption.wrap.width(h.getViewport().w-(h.wrap.outerWidth(!0)-h.inner.width())).wrapInner("<div></div>"))},_setDimension:function(a){var b,c,d,e,f,g,i,k,o,p,q,r,s,t,u,v=h.getViewport(),w=a||h.current,x=w.wrap,y=w.inner,z=w.width,A=w.height,B=w.minWidth,C=w.minHeight,D=w.maxWidth,E=w.maxHeight,F=w.margin,G=w.scrollOutside?w.scrollbarWidth:0,F=w.margin,H=w.padding,I=w.scrolling,J=1;if(I=I.split(","),b=I[0],c=I[1]||b,w.inner.css("overflow-x","yes"===b?"scroll":"no"===b?"hidden":b).css("overflow-y","yes"===c?"scroll":"no"===c?"hidden":c),e=F[1]+F[3]+H[1]+H[3],d=F[0]+F[2]+H[0]+H[2],B=m(l(B)?m(B,"w")-e:B),D=m(l(D)?m(D,"w")-e:D),C=m(l(C)?m(C,"h")-d:C),E=m(l(E)?m(E,"h")-d:E),f=m(l(z)?m(z,"w")-e:z),g=m(l(A)?m(A,"h")-d:A),w.fitToView&&(D=Math.min(D,m("100%","w")-e),E=Math.min(E,m("100%","h")-d)),p=v.w,q=v.h,"iframe"===w.type){if(k=w.content,x.removeClass("fancybox-tmp"),(w.autoWidth||w.autoHeight)&&k&&1===k.data("ready"))try{k[0].contentWindow&&k[0].contentWindow.document.location&&(o=k.contents().find("body"),y.addClass("fancybox-tmp"),y.width(screen.width-e).height(99999),G&&o.css("overflow-x","hidden"),w.autoWidth&&(f=o.outerWidth(!0)),w.autoHeight&&(g=o.outerHeight(!0)),y.removeClass("fancybox-tmp"))}catch(K){}}else(w.autoWidth||w.autoHeight)&&"image"!==w.type&&"swf"!==w.type&&(y.addClass("fancybox-tmp"),y.width(w.autoWidth?"auto":D),y.height(w.autoHeight?"auto":E),w.autoWidth&&(f=y[0].scrollWidth||y.width()),w.autoHeight&&(g=y[0].scrollHeight||y.height()),y.removeClass("fancybox-tmp"));if(z=f,A=g,i=f/g,!w.autoResize)return x.css({width:n(z),height:"auto"}),void y.css({width:n(z),height:n(A)});if(w.aspectRatio?(z>D&&(z=D,A=z/i),A>E&&(A=E,z=A*i),B>z&&(z=B,A=z/i),C>A&&(A=C,z=A*i)):(z=Math.max(B,Math.min(z,D)),w.autoHeight&&"iframe"!==w.type&&(y.width(z),g=A=y[0].scrollHeight),A=Math.max(C,Math.min(A,E))),x.css({width:n(z),height:"auto"}),y.css({width:n(z),height:n(A)}),r=m(x.outerWidth(!0)),s=m(x.outerHeight(!0)),w.fitToView)if(w.aspectRatio)for(;(r>p||s>q)&&z>B&&A>C&&!(J++>30);)A=Math.max(C,Math.min(E,A-10)),z=m(A*i),B>z&&(z=B,A=m(z/i)),z>D&&(z=D,A=m(z/i)),x.css({width:n(z)}),y.css({width:n(z),height:n(A)}),r=m(x.outerWidth(!0)),s=m(x.outerHeight(!0));else z=Math.max(B,Math.min(z,z-(r-p))),A=Math.max(C,Math.min(A,A-(s-q)));G&&"auto"===b&&(A<y[0].scrollHeight||j(w.content)&&w.content[0]&&A<w.content[0].offsetHeight)&&D>z+e+G&&(z+=G),x.css({width:z}),y.css({width:n(z),height:n(A)}),r=m(x.outerWidth(!0)),s=m(x.outerHeight(!0)),t=(r>p||s>q)&&z>B&&A>C,u=(p>r||q>s)&&(w.aspectRatio?D>z&&E>A&&f>z&&g>A:(D>z||E>A)&&(f>z||g>A)),w.canShrink=t,w.canExpand=u,!k&&w.autoHeight&&A>C&&E>A&&!u&&y.height("auto")},_getPosition:function(a){var b=a||h.current,c=b.wrap,d=h.getViewport(),e={},f=d.y,g=d.x;return e={top:n(Math.max(f,f+(d.h-c.outerHeight(!0))*b.topRatio)),left:n(Math.max(g,g+(d.w-c.outerWidth(!0))*b.leftRatio)),width:n(c.width()),height:n(c.height())}},_afterZoomIn:function(){var a=h.current;a&&(h.lock&&h.lock.css("overflow","auto"),h.isOpen=h.isOpened=!0,h.rebuild(),h.rebind(),a.caption&&a.caption.wrap&&a.caption.wrap.show().css({visibility:"visible",opacity:0,left:0}).animate({opacity:1},"fast"),h.update(),h.wrap.css("overflow","visible").addClass("fancybox-open").focus(),h[h.wrap.hasClass("fancybox-skin")?"wrap":"inner"].addClass("fancybox-"+a.theme+"-skin-open"),a.caption&&a.caption.wrap&&a.caption.wrap.show().css("left",0).animate({opacity:1},"fast"),a.margin[2]>0&&c('<div class="fancybox-spacer"></div>').css("height",n(a.margin[2]-2)).appendTo(h.wrap),h.trigger("afterShow"),h._preloadImages(),a.autoPlay&&!h.slideshow.isActive&&h.slideshow.start())},_afterZoomOut:function(a){var b=function(){p(".fancybox-wrap")};h.hideLoading(),a=a||h.current,a&&a.wrap&&a.wrap.hide(),c.extend(h,{group:[],opts:{},coming:null,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,inner:null}),h.trigger("afterClose",a),h.coming||h.current||(a.overlay?h.overlay.close(a.overlay,b):b())},_translate:function(a){var b=h.coming||h.current,c=b.locales[b.locale];return a.replace(/\{\{(\w+)\}\}/g,function(a,b){var e=c[b];return e===d?a:e})}}),h.transitions={_getOrig:function(a){var b=a||h.current,c=b.wrap,d=b.element,f=b.orig,g=h.getViewport(),i={},k=50,l=50;return!f&&d&&d.is(":visible")&&(f=d.find("img:first:visible"),f.length||(f=d)),!f&&b.group[0].element&&(f=b.group[0].element.find("img:visible:first")),j(f)&&f.is(":visible")?(i=f.offset(),f.is("img")&&(k=f.outerWidth(),l=f.outerHeight()),h.lock&&(i.top-=e.scrollTop(),i.left-=e.scrollLeft())):(i.top=g.y+(g.h-l)*b.topRatio,i.left=g.x+(g.w-k)*b.leftRatio),i={top:n(i.top-.5*(c.outerHeight(!0)-c.height())),left:n(i.left-.5*(c.outerWidth(!0)-c.width())),width:n(k),height:n(l)}},_getCenter:function(a){var b=a||h.current,c=b.wrap,d=h.getViewport(),e={},f=d.y,g=d.x;return e={top:n(Math.max(f,f+(d.h-c.outerHeight(!0))*b.topRatio)),left:n(Math.max(g,g+(d.w-c.outerWidth(!0))*b.leftRatio)),width:n(c.width()),height:n(c.height())}},_prepare:function(a,b){var c=a||h.current,d=c.wrap,e=c.inner;d.height(d.height()),e.css({width:100*e.width()/d.width()+"%",height:Math.floor(100*e.height()/d.height()*100)/100+"%"}),b===!0&&d.find(".fancybox-title, .fancybox-spacer, .fancybox-close, .fancybox-nav").remove(),e.css("overflow","hidden")},fade:function(a,b){var d=this._getCenter(a),e={opacity:0};return"open"===b||"changeIn"===b?[c.extend(d,e),{opacity:1}]:[{},e]},drop:function(a,b){var d=c.extend(this._getCenter(a),{opacity:1}),e=c.extend({},d,{opacity:0,top:n(Math.max(h.getViewport().y-a.margin[0],m(d.top)-200))});return"open"===b||"changeIn"===b?[e,d]:[{},e]},elastic:function(a,b){var d,e,f,g=a.wrap,i=a.margin,j=h.getViewport(),k=h.direction,l=this._getCenter(a),n=c.extend({},l),o=c.extend({},l);return"open"===b?n=this._getOrig(a):"close"===b?(n={},o=this._getOrig(a)):k&&(d="up"===k||"down"===k?"top":"left",e="up"===k||"left"===k?200:-200,"changeIn"===b?(f=m(n[d])+e,f="left"===k?Math.min(f,j.x+j.w-i[3]-g.outerWidth()-1):"right"===k?Math.max(f,j.x-i[1]):"up"===k?Math.min(f,j.y+j.h-i[0]-g.outerHeight()-1):Math.max(f,j.y-i[2]),n[d]=f):(f=m(g.css(d))-e,n={},f="left"===k?Math.max(f,j.x-i[3]):"right"===k?Math.min(f,j.x+j.w-i[1]-g.outerWidth()-1):"up"===k?Math.max(f,j.y-i[0]):Math.min(f,j.y+j.h-i[2]-g.outerHeight()-1),o[d]=f)),"open"===b||"changeIn"===b?(n.opacity=0,o.opacity=1):o.opacity=0,[n,o]},open:function(){{var a,b,d,e,f,g=h.current,i=h.previous;h.direction}i&&i.wrap.stop(!0).removeClass("fancybox-opened"),h.isOpened?(a=g.nextEffect,d=g.nextSpeed,e=g.nextEasing,f="changeIn"):(a=g.openEffect,d=g.openSpeed,e=g.openEasing,f="open"),"none"===a?h._afterZoomIn():(b=this[a](g,f),"elastic"===a&&this._prepare(g),g.wrap.css(b[0]),g.wrap.animate(b[1],d,e,h._afterZoomIn)),i&&(h.isOpened&&"none"!==i.prevEffect?(i.wrap.stop(!0).removeClass("fancybox-opened"),b=this[i.prevEffect](i,"changeOut"),this._prepare(i,!0),i.wrap.animate(b[1],i.prevSpeed,i.prevEasing,function(){p(i.wrap)})):p(c(".fancybox-wrap").not(g.wrap)))},close:function(){var a,b=h.current,c=b.wrap.stop(!0).removeClass("fancybox-opened"),d=b.closeEffect;return"none"===d?h._afterZoomOut():(this._prepare(b,!0),a=this[d](b,"close"),void c.addClass("fancybox-animating").animate(a[1],b.closeSpeed,b.closeEasing,h._afterZoomOut))}},h.slideshow={_clear:function(){this._timer&&clearTimeout(this._timer)},_set:function(){this._clear(),h.current&&this.isActive&&(this._timer=setTimeout(h.next,this._speed))},_timer:null,_speed:null,isActive:!1,start:function(a){var b=h.current;b&&(b.loop||b.index<b.group.length-1)&&(this.stop(),this.isActive=!0,this._speed=a||b.playSpeed,f.bind({"beforeLoad.player":c.proxy(this._clear,this),"onUpdate.player":c.proxy(this._set,this),"onCancel.player beforeClose.player":c.proxy(this.stop,this)}),this._set(),h.trigger("onPlayStart"))},stop:function(){this._clear(),f.unbind(".player"),this.isActive=!1,this._timer=this._speed=null,h.trigger("onPlayEnd")},toggle:function(){this.isActive?this.stop():this.start.apply(this,arguments)}},h.overlay={el:null,theme:"",open:function(a){var b,d,f=this,g=this.el,i=h.defaults.fixed;a=c.extend({},h.defaults.overlay,a),g?g.stop(!0).removeAttr("style").unbind(".overlay"):g=c('<div class="fancybox-overlay'+(i?" fancybox-overlay-fixed":"")+'"></div>').appendTo(a.parent||"body"),a.closeClick&&g.bind("click.overlay",function(){return h.lastTouch&&o()-h.lastTouch<300?!1:(h.isActive?h.close():f.close(),!1)}),d=a.theme||(h.coming?h.coming.theme:"default"),d!==this.theme&&g.removeClass("fancybox-"+this.theme+"-overlay"),this.theme=d,g.addClass("fancybox-"+d+"-overlay").css(a.css),b=g.css("opacity"),!this.el&&1>b&&a.speedIn&&g.css({opacity:0,filter:"alpha(opacity=0)"}).fadeTo(a.speedIn,b),this.el=g,i||(e.bind("resize.overlay",c.proxy(this.update,this)),this.update())
},close:function(a,b){a=c.extend({},h.defaults.overlay,a),this.el&&this.el.stop(!0).fadeOut(a.speedOut,function(){e.unbind("resize.overlay"),c(".fancybox-overlay").remove(),h.overlay.el=null,c.isFunction(b)&&b()})},update:function(){this.el.css({width:"100%",height:"100%"}),this.el.width(f.width()).height(f.height())}},h.touch={startX:0,wrapX:0,dx:0,isMoving:!1,_start:function(a){var b=(h.current,a.originalEvent.touches?a.originalEvent.touches[0]:a),d=o();if(h.isOpen&&!h.wrap.is(":animated")&&(c(a.target).is(h.inner)||c(a.target).parent().is(h.inner))){if(h.lastTouch&&d-h.lastTouch<300)return a.preventDefault(),h.lastTouch=d,this._cancel(!0),h.toggle(),!1;h.lastTouch=d,h.wrap&&h.wrap.outerWidth()>h.getViewport().w||(a.preventDefault(),b&&h.wrap&&h.wrap.outerWidth()<h.getViewport().w&&(this.startX=b.pageX,this.wrapX=h.wrap.position().left,this.isMoving=!0,h.inner.bind("touchmove.fb",c.proxy(this._move,this)).one("touchend.fb touchcancel.fb",c.proxy(this._cancel,this))))}},_move:function(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a,c=this.startX-b.pageX;this.isMoving&&h.isOpen&&(this.dx=c,h.current.wrap.outerWidth(!0)<=e.width()&&(Math.abs(c)>=50?(a.preventDefault(),this.last=0,this._cancel(!0),c>0?h.next("left"):h.prev("right")):Math.abs(c)>3&&(a.preventDefault(),this.last=0,h.wrap.css("left",this.wrapX-c))))},_clear:function(){this.startX=this.wrapX=this.dx=0,this.isMoving=!1},_cancel:function(){h.inner&&h.inner.unbind("touchmove.fb"),h.isOpen&&Math.abs(this.dx)>3&&h.reposition(!1),this._clear()},init:function(){h.inner&&h.touch&&(this._cancel(!0),h.inner.bind("touchstart.fb",c.proxy(this._start,this)))}},c.easing.easeOutQuad||(c.easing.easeOutQuad=function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}),f.ready(function(){var b,f,i,j;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;padding:0;margin:0;border:0;"></div>').appendTo("body"),b="fixed"===a.css("position")&&(a[0].offsetTop>18&&a[0].offsetTop<22||15===a[0].offsetTop);return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),i=e.scrollTop(),j=e.scrollLeft(),b=c(a).width(),g.addClass("fancybox-lock-test"),f=c(a).width(),g.removeClass("fancybox-lock-test"),e.scrollTop(i).scrollLeft(j),h.lockMargin=f-b,c("<style type='text/css'>.fancybox-margin{margin-right:"+h.lockMargin+"px;}</style>").appendTo("head")}),c.fn.fancybox=function(a){var b=this,d=this.length?this.selector:!1,e=d&&d.indexOf("()")<0&&!(a&&a.live===!1),g=function(f){var g=e?c(d):b,i=c(this).blur(),j=a.groupAttr||"data-fancybox-group",k=i.attr(j),l=this.rel;!k&&l&&"nofollow"!==l&&(j="rel",k=l),k&&(i=g.filter("["+j+'="'+k+'"]'),a.index=i.index(this)),i.length&&(f.preventDefault(),h.open(i.get(),a))};return a=a||{},e?f.undelegate(d,"click.fb-start").delegate(d+":not('.fancybox-close,.fancybox-nav,.fancybox-wrap')","click.fb-start",g):b.unbind("click.fb-start").bind("click.fb-start",g),this}}(window,document,jQuery),!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c(a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==e.readyState;if(!b.isReady&&!c){b.isReady=!0;for(var d=0,g=f.length;g>d;d++){var h=f[d];h()}}}function d(d){return d.bind(e,"DOMContentLoaded",c),d.bind(e,"readystatechange",c),d.bind(a,"load",c),b}var e=a.document,f=[];b.isReady=!1,"function"==typeof define&&define.amd?(b.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],d)):a.docReady=d(a.eventie)}(this),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function d(a){function d(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var d=f(a);if("none"===d.display)return c();var e={};e.width=a.offsetWidth,e.height=a.offsetHeight;for(var k=e.isBorderBox=!(!j||!d[j]||"border-box"!==d[j]),l=0,m=g.length;m>l;l++){var n=g[l],o=d[n];o=h(a,o);var p=parseFloat(o);e[n]=isNaN(p)?0:p}var q=e.paddingLeft+e.paddingRight,r=e.paddingTop+e.paddingBottom,s=e.marginLeft+e.marginRight,t=e.marginTop+e.marginBottom,u=e.borderLeftWidth+e.borderRightWidth,v=e.borderTopWidth+e.borderBottomWidth,w=k&&i,x=b(d.width);x!==!1&&(e.width=x+(w?0:q+u));var y=b(d.height);return y!==!1&&(e.height=y+(w?0:r+v)),e.innerWidth=e.width-(q+u),e.innerHeight=e.height-(r+v),e.outerWidth=e.width+s,e.outerHeight=e.height+t,e}}function h(a,b){if(e||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,f=a.runtimeStyle,g=f&&f.left;return g&&(f.left=a.currentStyle.left),c.left=b,b=c.pixelLeft,c.left=d,g&&(f.left=g),b}var i,j=a("boxSizing");return function(){if(j){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[j]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var d=f(a);i=200===b(d.width),c.removeChild(a)}}(),d}var e=a.getComputedStyle,f=e?function(a){return e(a,null)}:function(a){return a.currentStyle},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],d):"object"==typeof exports?module.exports=d(require("get-style-property")):a.getSize=d(a.getStyleProperty)}(window),function(a,b){function c(a,b){return a[h](b)}function d(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function e(a,b){d(a);for(var c=a.parentNode.querySelectorAll(b),e=0,f=c.length;f>e;e++)if(c[e]===a)return!0;return!1}function f(a,b){return d(a),c(a,b)}var g,h=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(h){var i=document.createElement("div"),j=c(i,"div");g=j?c:f}else g=e;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return g}):window.matchesSelector=g}(this,Element.prototype),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=a.getComputedStyle,g=f?function(a){return f(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return void(i&&i.error("Bad "+this.constructor.namespace+" element: "+a));this.element=a,this.options=b({},this.constructor.defaults),this.option(c);var d=++r;this.element.outlayerGUID=d,s[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var r=0,s={};return q.namespace="outlayer",q.Item=p,q.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){this.resizeContainer()},q.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){this.isResizeBound&&c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},q.prototype.needsResizeLayout=function(){var a=n(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},q.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize(),delete this.element.outlayerGUID,j&&j.removeData(this.element,this.constructor.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&s[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,d.defaults=b({},q.defaults),b(d.defaults,c),d.prototype.settings={},d.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){function b(a,b){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):a.Masonry=b(a.Outlayer,a.getSize)}(window);
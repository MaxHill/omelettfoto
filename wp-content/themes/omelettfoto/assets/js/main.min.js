!function(a){a(window).load(function(){FastClick.attach(document.body),a(".fancybox").fancybox({helpers:{thumbs:!0}}),a("#image-container").imagesLoaded(function(){a("#image-container").masonry({itemSelector:".image-grid-item"}).masonry("layout")});var b=!1;a("#navigation ul").on("click",function(){b?(console.log(),a("#navigation ul").children("li").removeClass("show").addClass("hide"),setTimeout(function(){a("#navigation ul").children("li").removeClass("hide")},301),b=!1):(b=!0,a(this).children("li").addClass("show"))}),a("#main").on("click",function(){a("#navigation ul").children("li").removeClass("show").addClass("hide"),setTimeout(function(){a("#navigation ul").children("li").removeClass("hide")},301),b=!1});{var c=1,d=!1,e=!1,f=function(b){var f=this;f.url=b.url,f.container=b.container,f.pagination=a(".imagePagination"),f.pageLink=a(".imagePagination .nextpostslink, .imagePagination .previouspostslink"),console.log(f.url+f.container);var g={run:function(){g.hidePagination(),g.ajax()},hidePagination:function(){f.pageLink.hide()},toggleLoading:function(){if(a(".loading").length<1){var b="<p class='loading'>Laddar...</p>";f.pagination.append(b)}else a(".loading").remove()},ajax:function(){g.toggleLoading();var b;a.ajax({url:f.url+"page/"+(c+1),dataType:"html",success:function(d){b=a(d).find(f.container),c+=1,console.log(c)},error:function(a){var b="<p class='loading'>Error: "+a.status+"</p>";f.pagination.append(b),g.toggleLoading()}}).done(function(){g.output(b)})},output:function(b){d=!1,b.children(".image-grid-item").length>0?(g.toggleLoading(),b.children(".image-grid-item").each(function(b,c){var d=a(c).addClass("fadeMeIn");a(f.container).append(d).masonry("appended",c),e=!1}),setTimeout(function(){a(f.container).masonry("layout")},10)):(e=!0,a(".loading").html("Det finns inga fler bilder..."),e=!0,setTimeout(function(){g.toggleLoading()},4e3))}};a(window).scroll(function(){a(window).scrollTop()+a(window).height()!=a(document).height()||d||e||(d=!0,g.run())})},g=window.location.pathname;new f({url:g,container:"#image-container"})}})}(jQuery);